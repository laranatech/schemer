"use strict";var E=Object.defineProperty;var j=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var f=(r,e,t)=>j(r,typeof e!="symbol"?e+"":e,t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=r=>e=>{if(e>=r)return!0;throw new Error(`${e} cannot be less than ${r}`)},m=r=>e=>{if(e<=r)return!0;throw new Error(`${e} cannot be greater than ${r}`)},O=r=>e=>{if(e===r)return!0;throw new Error(`${e} !== ${r}`)},S=r=>e=>{if(e.length>=r)return!0;throw new Error(`The value's length (${e.length}) is too short. Min: ${r}`)},_=r=>e=>{if(e.length<=r)return!0;throw new Error(`The value's length (${e.length}) is too long. Min: ${r}`)},T=r=>e=>{if(e.length===r)return!0;throw new Error(`The value's length (${e.length}) !== ${r}`)},M=()=>r=>{if(r<0)return!0;throw new Error(`Value must be negative: ${r}`)},x=()=>r=>{if(r>=0)return!0;throw new Error(`Value must be positive: ${r}`)},y=(r,e=void 0)=>{const t=new RegExp(r,e);return n=>{if(t.test(n))return!0;throw new Error(`${n} doesn't match the pattern: ${String(r)}${e?"/"+String(e):""}`)}},w=r=>e=>{if(!r.includes(e))return!0;throw new Error(`${e} is forbidden: [${r.join(", ")}]`)},l=r=>e=>{if(r.includes(e))return!0;throw new Error(`${e} is not on the list: [${r.join(", ")}]`)},A=()=>r=>{const e=`The value cannot be empty: ${r}`;if(Array.isArray(r)||typeof r=="string"){if(r.length>0)return!0;throw new Error(e)}if(typeof r=="object"){if(Object.keys(r).length>0)return!0;throw new Error(e)}throw new Error(`Invalid value type: ${typeof r}`)},u=r=>e=>Object.keys(e).filter(t=>{try{return r(t)}catch(n){return!1}}),a=(r,e)=>r.length===e.length&&r.every((t,n)=>t===e[n]),F=Object.freeze(Object.defineProperty({__proto__:null,compareArrays:a,filterObjectKeys:u},Symbol.toStringTag,{value:"Module"})),b=r=>{const e=u(l(r));return t=>{const n=e(t);if(a(n,Object.keys(t)))return!0;const i=u(w(r))(t);throw new Error(`${t} has Invalid fields: [${i.join(", ")}]`)}},I=r=>{const e=u(w(r));return t=>{const n=e(t);if(a(n,Object.keys(t)))return!0;const i=u(l(r))(t);throw new Error(`${t} has Invalid fields: [${i.join(", ")}]`)}},N=()=>{const r=y(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);return e=>{try{return r(e),!0}catch(t){throw new Error(`Invalid email: ${e}`)}}},k=Object.freeze(Object.defineProperty({__proto__:null,allowedFields:b,allowlist:l,blockedFields:I,blocklist:w,email:N,exact:O,exactLength:T,max:m,maxLength:_,min:g,minLength:S,negative:M,notEmpty:A,positive:x,regexp:y},Symbol.toStringTag,{value:"Module"})),q=r=>{if(!Number.isNaN(r)&&typeof r=="number")return!0;throw new Error(`${r} is NaN`)},V=r=>{if(Number.isInteger(r))return!0;throw new Error(`Value must integer: ${r}`)},P=r=>{if(typeof r=="string")return!0;throw new Error(`${r} is not a string`)},z=r=>{if(typeof r=="boolean")return!0;throw new Error(`${r} must be boolean`)},$=r=>{if(Array.isArray(r))return!0;throw new Error(`${r} must be an array`)},c=Object.freeze(Object.defineProperty({__proto__:null,array:$,bool:z,int:V,number:q,string:P},Symbol.toStringTag,{value:"Module"})),h=(r,e,t="")=>{const n=l(Object.keys(c));if(typeof e=="string")return n(e),c[e](r);if(Array.isArray(e)&&e.length===1)return $(r)&&r.every(o=>h(o,e[0]));if(typeof e!="object")throw new Error(`${t?t+" | ":""}Invalid config: ${e}`);if(b(["type","required","rules","nullable"])(e),e.required===!0&&r===void 0)throw new Error(`${t?t+" | ":""}Value is required`);if(e.nullable===!0&&r===null)return!0;if(r===null)throw new Error(`${t?t+" | ":""}Value cannot be null`);return n(e.type),c[e.type](r),e.rules&&e.rules.forEach(o=>{o(r)}),!0},d=(r,e)=>{const t=Object.keys(e),n=Object.keys(r),o=[],i=t.filter(s=>e[s].required!==!0?!1:!n.includes(s));return i.length>0&&o.push(`Missing required fields: ${i.join(", ")}`),n.every(s=>{if(!t.includes(s)){o.push(`Unknown field: ${s}`);return}try{return h(r[s],e[s],s)}catch(p){o.push(p)}}),{success:o.length===0,errors:o}};class L{constructor(e){f(this,"schema",{});this.schema=e}validate(e){const{success:t,errors:n}=this.validateSafely(e);if(t)return!0;throw new Error(`Validation error:
${n.join(`
`)}`)}validateSafely(e){return d(e,this.schema)}}const K=(r,e,t="")=>{const n=[];try{h(r,e,t)}catch(o){n.push(o)}return{success:n.length===0,errors:n}},R=(r,e)=>{const{success:t,errors:n}=d(r,e);if(t)return!0;throw new Error(`Validation error:
${n.join(`
`)}`)};exports.Schemer=L;exports.rules=k;exports.types=c;exports.utils=F;exports.validate=h;exports.validateObject=R;exports.validateObjectSafely=d;exports.validateSafely=K;
